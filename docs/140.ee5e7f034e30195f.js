"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[140],{9944:(I,b,l)=>{l.d(b,{H:()=>h});var o=l(1223),v=l(2340),t=l(520),f=l(9857);const _=v.N.base_url;let h=(()=>{class g{constructor(x,c){this.http=x,this.authService=c,this.appointmentSelected=new o.vpe}get token(){return sessionStorage.getItem("token")||""}get headers(){return{headers:{Authorization:`Bearer ${this.token}`}}}getAppointmentsByUser(x,c,N){let y,u=`${_}/appointments/user/${this.authService.userActive.id_user}?status=${x}`;if(c){let{limit:m,offset:Z,fullname:p}=c;y=p,u=`${u}&limit=${m}&offset=${Z}`}return y&&(y=y.toString().trim(),u=`${u}&fullname=${y}`),N&&(u=`${u}&date=${N}`),console.log({url:u}),this.http.get(u,this.headers)}getAppointmentsByPatient(x){return this.http.get(`${_}/appointments/patient/${x}`,this.headers)}changeStatus(x){const{id_appointment:c,status:N}=x;return this.http.patch(`${_}/appointments/${c}`,{status:N},this.headers)}changeAppointmentSelected(x){this.appointmentSelected.emit(x)}create(x){const c=Object.assign(Object.assign({},x),{id_user:this.authService.userActive.id_user});return this.http.post(`${_}/appointments`,c,this.headers)}}return g.\u0275fac=function(x){return new(x||g)(o.LFG(t.eN),o.LFG(f.e))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},2749:(I,b,l)=>{l.d(b,{k:()=>o});let o=(()=>{class v{}return v.ONLY_TEXT=/^[a-zA-Z\\xf1\xc0-\xfa ]{2,20}$/,v.PHONE_NUMBER=/^[0-9]{10,12}$/,v.CP=/^[0-9]{5}$/,v.STREET=/^[a-zA-Z0-9\\xf1\xc0-\xfa ]{2,50}$/,v.USER_NAME=/^[a-zA-Z0-9]{8,24}$/,v.PASSWORD=/^[a-zA-Z0-9]{8,}$/,v.PRICE=/^[0-9]{0,}(\.[0-9]{0,2})?$/,v.TEXT_SERVICE=/^[a-zA-Z\\xf1\xc0-\xfa ]{2,120}$/,v})()},6456:(I,b,l)=>{l.d(b,{Z:()=>o});class o{static validate(t){return f=>{var _,h,g;if(null===(_=f.get(t))||void 0===_?void 0:_.value){const A=null===(h=f.get(t))||void 0===h?void 0:h.value.split("-");return new Date(A[0],A[1]-1,A[2]).setHours(0,0,0,0)>=(new Date).setHours(0,0,0,0)?(null===(g=f.get(t))||void 0===g||g.setErrors({isMax:!0}),{isMax:!0}):null}return null}}}},8140:(I,b,l)=>{l.r(b),l.d(b,{PatientsRoutingModule:()=>pn});var o=l(3476),v=l(8505),t=l(1223),f=l(2780);let _=(()=>{class n{constructor(e,i){this.patientService=e,this.router=i}canActivate(e,i){return this.patientService.getPatientByUser(e.params.patientID).pipe((0,v.b)(s=>{s||this.router.navigate(["/patients"])}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(f.e),t.LFG(o.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h=l(5226),g=l.n(h),A=l(5242),x=l(9857),c=l(3075),N=l(2749),F=l(6456),u=l(9808);function y(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function m(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"ingrese un valor correcto"),t.qZA())}function Z(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,y,2,0,"span",61),t.YNc(2,m,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("name","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("name","pattern"))}}function p(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function E(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"ingrese un valor correcto"),t.qZA())}function M(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,p,2,0,"span",61),t.YNc(2,E,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("last_name","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("last_name","pattern"))}}function R(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function V(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"ingrese una fecha correcta"),t.qZA())}function W(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,R,2,0,"span",61),t.YNc(2,V,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("date_birth","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("date_birth","isMax"))}}function tt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function et(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,tt,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("gender","required"))}}function nt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function it(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"Debe ser un email correcto"),t.qZA())}function ot(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,nt,2,0,"span",61),t.YNc(2,it,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("email","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("email","email"))}}function at(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function rt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"ingrese un valor correcto"),t.qZA())}function st(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,at,2,0,"span",61),t.YNc(2,rt,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("phone_number","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("phone_number","pattern"))}}function ct(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function lt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"ingrese un valor correcto"),t.qZA())}function pt(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,ct,2,0,"span",61),t.YNc(2,lt,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("street","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("street","pattern"))}}function dt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function ut(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"ingrese un valor correcto"),t.qZA())}function _t(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,dt,2,0,"span",61),t.YNc(2,ut,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("cp","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("cp","pattern"))}}function mt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function gt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"ingrese un valor correcto"),t.qZA())}function ht(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,mt,2,0,"span",61),t.YNc(2,gt,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("city","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("city","pattern"))}}function ft(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function vt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"ingrese un valor correcto"),t.qZA())}function xt(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,ft,2,0,"span",61),t.YNc(2,vt,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("country","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("country","pattern"))}}function bt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function Zt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"ingrese un valor correcto"),t.qZA())}function Tt(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,bt,2,0,"span",61),t.YNc(2,Zt,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("f_name","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("f_name","pattern"))}}function At(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function Ct(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"ingrese un valor correcto"),t.qZA())}function qt(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,At,2,0,"span",61),t.YNc(2,Ct,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("f_last_name","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("f_last_name","pattern"))}}function Ut(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function Nt(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,Ut,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("f_gender","required"))}}function St(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function yt(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,St,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("relationship","required"))}}function Pt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function It(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"Debe ser un email correcto"),t.qZA())}function Ft(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,Pt,2,0,"span",61),t.YNc(2,It,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("f_email","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("f_email","email"))}}function Jt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"campo requerido"),t.qZA())}function wt(n,a){1&n&&(t.TgZ(0,"span",62),t._uU(1,"ingrese un valor correcto"),t.qZA())}function Ot(n,a){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,Jt,2,0,"span",61),t.YNc(2,wt,2,0,"span",61),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validateField("f_phone_number","required")),t.xp6(1),t.Q6J("ngIf",e.validateField("f_phone_number","pattern"))}}function Qt(n,a){if(1&n&&(t.TgZ(0,"button",63),t._UZ(1,"i",64),t._uU(2,"Guardar "),t.qZA()),2&n){const e=t.oxw();t.Q6J("disabled",e.patientForm.invalid)}}function Et(n,a){if(1&n&&(t.TgZ(0,"button",63),t._UZ(1,"i",64),t._uU(2,"Guardar "),t.qZA()),2&n){const e=t.oxw();t.Q6J("disabled",e.patientForm.invalid)}}let G=(()=>{class n{constructor(e){this.fb=e,this.patient=new t.vpe,this.isNew=!0,this.regexExpressions=N.k,this.patientForm=this.fb.group({name:["",[c.kI.required,c.kI.pattern(this.regexExpressions.ONLY_TEXT)]],last_name:["",[c.kI.required,c.kI.pattern(this.regexExpressions.ONLY_TEXT)]],date_birth:["",c.kI.required],gender:["",[c.kI.required]],email:["",[c.kI.required,c.kI.email,c.kI.minLength(10)]],phone_number:["",[c.kI.required,c.kI.pattern(this.regexExpressions.PHONE_NUMBER)]],street:["",[c.kI.required,c.kI.pattern(this.regexExpressions.STREET)]],cp:["",[c.kI.required,c.kI.pattern(this.regexExpressions.CP)]],city:["",[c.kI.required,c.kI.pattern(this.regexExpressions.ONLY_TEXT)]],country:["",[c.kI.required,c.kI.pattern(this.regexExpressions.ONLY_TEXT)]],f_name:["",[c.kI.required,c.kI.pattern(this.regexExpressions.ONLY_TEXT)]],f_last_name:["",[c.kI.required,c.kI.pattern(this.regexExpressions.ONLY_TEXT)]],relationship:["",c.kI.required],f_gender:["",c.kI.required],f_email:["",[c.kI.required,c.kI.email]],f_phone_number:["",[c.kI.required,c.kI.pattern(this.regexExpressions.PHONE_NUMBER)]]},{validators:[F.Z.validate("date_birth")]})}ngOnInit(){this.isNew||this.setValuesToForm(this.patientActive)}setValuesToForm(e){var i,r,s,d,T,q,U,P,J,w,C,O,$,H,j,B;null===(i=this.patientForm.get("name"))||void 0===i||i.setValue(e.name),null===(r=this.patientForm.get("last_name"))||void 0===r||r.setValue(e.last_name),null===(s=this.patientForm.get("date_birth"))||void 0===s||s.setValue(new Date(e.date_birth).toISOString().split("T")[0]),null===(d=this.patientForm.get("gender"))||void 0===d||d.setValue(e.gender),null===(T=this.patientForm.get("email"))||void 0===T||T.setValue(e.email),null===(q=this.patientForm.get("phone_number"))||void 0===q||q.setValue(e.phone_number),null===(U=this.patientForm.get("street"))||void 0===U||U.setValue(e.street),null===(P=this.patientForm.get("cp"))||void 0===P||P.setValue(e.cp),null===(J=this.patientForm.get("city"))||void 0===J||J.setValue(e.city),null===(w=this.patientForm.get("country"))||void 0===w||w.setValue(e.country),null===(C=this.patientForm.get("f_name"))||void 0===C||C.setValue(e.familiar.familiar_name),null===(O=this.patientForm.get("f_last_name"))||void 0===O||O.setValue(e.familiar.familiar_last_name),null===($=this.patientForm.get("relationship"))||void 0===$||$.setValue(e.familiar.relationship),null===(H=this.patientForm.get("f_gender"))||void 0===H||H.setValue(e.familiar.familiar_gender),null===(j=this.patientForm.get("f_email"))||void 0===j||j.setValue(e.familiar.familiar_email),null===(B=this.patientForm.get("f_phone_number"))||void 0===B||B.setValue(e.familiar.familiar_phone_number)}savePatient(){var e,i,r,s,d,T,q,U;if(this.patientForm.valid){const P=Object.assign(Object.assign({},this.patientForm.value),{cp:Number(null===(e=this.patientForm.get("cp"))||void 0===e?void 0:e.value),phone_number:Number(null===(i=this.patientForm.get("phone_number"))||void 0===i?void 0:i.value),familiar:{familiar_name:null===(r=this.patientForm.get("f_name"))||void 0===r?void 0:r.value,familiar_last_name:null===(s=this.patientForm.get("f_last_name"))||void 0===s?void 0:s.value,familiar_email:null===(d=this.patientForm.get("f_email"))||void 0===d?void 0:d.value,familiar_gender:null===(T=this.patientForm.get("f_gender"))||void 0===T?void 0:T.value,familiar_phone_number:Number(null===(q=this.patientForm.get("f_phone_number"))||void 0===q?void 0:q.value),relationship:null===(U=this.patientForm.get("relationship"))||void 0===U?void 0:U.value}});this.patient.emit(P)}}validateForm(e){const i=this.patientForm.get(e);return(null==i?void 0:i.errors)&&((null==i?void 0:i.dirty)||(null==i?void 0:i.touched))}validateField(e,i){var r;return null===(r=this.patientForm.get(e))||void 0===r?void 0:r.hasError(i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-patient-form"]],inputs:{patientActive:"patientActive",isNew:"isNew"},outputs:{patient:"patient"},decls:147,vars:19,consts:[[1,"card","border-top","border-0","border-4","border-info","radius-10"],[1,"card-body","p-5"],[1,"card-title","d-flex","align-items-center","gap-2"],[1,"bx","bxs-user","me-1","font-30","text-info"],[1,"mb-0","text-info"],[1,"my-2"],[1,"row","g-3","my-1",3,"formGroup","submit"],[1,"col-6","my-2"],["for","inputName",1,"form-label"],["formControlName","name","type","text","id","inputName",1,"form-control","radius-10"],["class","message-error",4,"ngIf"],["for","inputLastName",1,"form-label"],["formControlName","last_name","type","text","id","inputLastName",1,"form-control","radius-10"],["for","inputDateBirth",1,"form-label"],["formControlName","date_birth","type","date","id","inputDateBirth",1,"form-control","radius-10"],[1,"form-label"],["formControlName","gender",1,"form-select","radius-10"],["value","","selected",""],["value","male"],["value","female"],["value","other"],["for","inputEmail",1,"form-label"],["formControlName","email","type","email","id","inputEmail",1,"form-control","radius-10"],["for","inputPhoneNumber",1,"form-label"],["formControlName","phone_number","type","tel","id","inputPhoneNumber",1,"form-control","radius-10"],[1,"card-title","d-flex","align-items-center","m-0","mt-3","gap-2"],[1,"bx","bx-home","me-1","font-30","text-info"],["for","inputStreet",1,"form-label"],["formControlName","street","type","text","id","inputStreet",1,"form-control","radius-10"],["for","inputCP",1,"form-label"],["formControlName","cp","type","text","id","inputCP",1,"form-control","radius-10"],["for","inputCity",1,"form-label"],["formControlName","city","type","text","id","inputCity",1,"form-control","radius-10"],["for","inputCountry",1,"form-label"],["formControlName","country","type","text","id","inputCountry",1,"form-control","radius-10"],[1,"bx","bx-user","me-1","font-30","text-info"],["for","inputFamiliarName",1,"form-label"],["formControlName","f_name","type","text","id","inputFamiliarName",1,"form-control","radius-10"],["for","inputFamiliarLastName",1,"form-label"],["formControlName","f_last_name","type","text","id","inputFamiliarLastName",1,"form-control","radius-10"],["formControlName","f_gender",1,"form-select","radius-10"],["formControlName","relationship",1,"form-select","radius-10"],["value","wife"],["value","husband"],["value","mother"],["value","father"],["value","brother"],["value","sister"],["value","grandpa"],["value","grandma"],["value","uncle"],["value","aunt"],["for","inputFamiliarEmail",1,"form-label"],["formControlName","f_email","type","email","id","inputFamiliarEmail",1,"form-control","radius-10"],["for","inputFamiliarPhoneNumber",1,"form-label"],["formControlName","f_phone_number","type","tel","id","inputFamiliarPhoneNumber",1,"form-control","radius-10"],[1,"d-flex","justify-content-end","align-center","gap-2"],["type","button","routerLink","/patients",1,"btn","btn-danger","radius-10"],[1,"bx","bx-block"],["type","submit","class","btn btn-primary radius-10 ",3,"disabled",4,"ngIf"],[1,"message-error"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","submit",1,"btn","btn-primary","radius-10",3,"disabled"],[1,"bx","bx-save"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),t._UZ(4,"i",3),t.qZA(),t.TgZ(5,"h3",4),t._uU(6,"Informaci\xf3n General"),t.qZA()(),t._UZ(7,"hr",5),t.TgZ(8,"form",6),t.NdJ("submit",function(){return i.savePatient()}),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Nombre"),t.qZA(),t._UZ(12,"input",9),t.YNc(13,Z,3,2,"div",10),t.qZA(),t.TgZ(14,"div",7)(15,"label",11),t._uU(16,"Apellido"),t.qZA(),t._UZ(17,"input",12),t.YNc(18,M,3,2,"div",10),t.qZA(),t.TgZ(19,"div",7)(20,"label",13),t._uU(21,"Fecha de Nacimiento"),t.qZA(),t._UZ(22,"input",14),t.YNc(23,W,3,2,"div",10),t.qZA(),t.TgZ(24,"div",7)(25,"label",15),t._uU(26,"Sexo"),t.qZA(),t.TgZ(27,"select",16)(28,"option",17),t._uU(29,"Seleccione una opci\xf3n"),t.qZA(),t.TgZ(30,"option",18),t._uU(31,"Hombre"),t.qZA(),t.TgZ(32,"option",19),t._uU(33,"Mujer"),t.qZA(),t.TgZ(34,"option",20),t._uU(35,"Otro"),t.qZA()(),t.YNc(36,et,2,1,"div",10),t.qZA(),t.TgZ(37,"div",7)(38,"label",21),t._uU(39,"Email"),t.qZA(),t._UZ(40,"input",22),t.YNc(41,ot,3,2,"div",10),t.qZA(),t.TgZ(42,"div",7)(43,"label",23),t._uU(44,"Tel\xe9fono"),t.qZA(),t._UZ(45,"input",24),t.YNc(46,st,3,2,"div",10),t.qZA(),t.TgZ(47,"div",25)(48,"div"),t._UZ(49,"i",26),t.qZA(),t.TgZ(50,"h4",4),t._uU(51,"Direcci\xf3n"),t.qZA()(),t._UZ(52,"hr",5),t.TgZ(53,"div",7)(54,"label",27),t._uU(55,"Calle y N\xfamero"),t.qZA(),t._UZ(56,"input",28),t.YNc(57,pt,3,2,"div",10),t.qZA(),t.TgZ(58,"div",7)(59,"label",29),t._uU(60,"CP"),t.qZA(),t._UZ(61,"input",30),t.YNc(62,_t,3,2,"div",10),t.qZA(),t.TgZ(63,"div",7)(64,"label",31),t._uU(65,"Ciudad"),t.qZA(),t._UZ(66,"input",32),t.YNc(67,ht,3,2,"div",10),t.qZA(),t.TgZ(68,"div",7)(69,"label",33),t._uU(70,"Pa\xeds"),t.qZA(),t._UZ(71,"input",34),t.YNc(72,xt,3,2,"div",10),t.qZA(),t.TgZ(73,"div",25)(74,"div"),t._UZ(75,"i",35),t.qZA(),t.TgZ(76,"h4",4),t._uU(77,"Persona responsable"),t.qZA()(),t._UZ(78,"hr",5),t.TgZ(79,"div",7)(80,"label",36),t._uU(81,"Nombre"),t.qZA(),t._UZ(82,"input",37),t.YNc(83,Tt,3,2,"div",10),t.qZA(),t.TgZ(84,"div",7)(85,"label",38),t._uU(86,"Apellido"),t.qZA(),t._UZ(87,"input",39),t.YNc(88,qt,3,2,"div",10),t.qZA(),t.TgZ(89,"div",7)(90,"label",15),t._uU(91,"Sexo"),t.qZA(),t.TgZ(92,"select",40)(93,"option",17),t._uU(94,"Seleccione una opci\xf3n"),t.qZA(),t.TgZ(95,"option",18),t._uU(96,"Hombre"),t.qZA(),t.TgZ(97,"option",19),t._uU(98,"Mujer"),t.qZA(),t.TgZ(99,"option",20),t._uU(100,"Otro"),t.qZA()(),t.YNc(101,Nt,2,1,"div",10),t.qZA(),t.TgZ(102,"div",7)(103,"label",15),t._uU(104,"Parentesco"),t.qZA(),t.TgZ(105,"select",41)(106,"option",17),t._uU(107,"Seleccione una opci\xf3n"),t.qZA(),t.TgZ(108,"option",42),t._uU(109,"Esposa"),t.qZA(),t.TgZ(110,"option",43),t._uU(111,"Esposo"),t.qZA(),t.TgZ(112,"option",44),t._uU(113,"Madre"),t.qZA(),t.TgZ(114,"option",45),t._uU(115,"Padre"),t.qZA(),t.TgZ(116,"option",46),t._uU(117,"Hermano"),t.qZA(),t.TgZ(118,"option",47),t._uU(119,"Hermana"),t.qZA(),t.TgZ(120,"option",48),t._uU(121,"Abuelo"),t.qZA(),t.TgZ(122,"option",49),t._uU(123,"Abuela"),t.qZA(),t.TgZ(124,"option",50),t._uU(125,"T\xedo"),t.qZA(),t.TgZ(126,"option",51),t._uU(127,"T\xeda"),t.qZA(),t.TgZ(128,"option",20),t._uU(129,"Otro"),t.qZA()(),t.YNc(130,yt,2,1,"div",10),t.qZA(),t.TgZ(131,"div",7)(132,"label",52),t._uU(133,"Email"),t.qZA(),t._UZ(134,"input",53),t.YNc(135,Ft,3,2,"div",10),t.qZA(),t.TgZ(136,"div",7)(137,"label",54),t._uU(138,"Tel\xe9fono"),t.qZA(),t._UZ(139,"input",55),t.YNc(140,Ot,3,2,"div",10),t.qZA(),t.TgZ(141,"div",56)(142,"button",57),t._UZ(143,"i",58),t._uU(144," Cancelar "),t.qZA(),t.YNc(145,Qt,3,1,"button",59),t.YNc(146,Et,3,1,"button",59),t.qZA()()()()),2&e&&(t.xp6(8),t.Q6J("formGroup",i.patientForm),t.xp6(5),t.Q6J("ngIf",i.validateForm("name")),t.xp6(5),t.Q6J("ngIf",i.validateForm("last_name")),t.xp6(5),t.Q6J("ngIf",i.validateForm("date_birth")),t.xp6(13),t.Q6J("ngIf",i.validateForm("gender")),t.xp6(5),t.Q6J("ngIf",i.validateForm("email")),t.xp6(5),t.Q6J("ngIf",i.validateForm("phone_number")),t.xp6(11),t.Q6J("ngIf",i.validateForm("street")),t.xp6(5),t.Q6J("ngIf",i.validateForm("cp")),t.xp6(5),t.Q6J("ngIf",i.validateForm("city")),t.xp6(5),t.Q6J("ngIf",i.validateForm("country")),t.xp6(11),t.Q6J("ngIf",i.validateForm("f_name")),t.xp6(5),t.Q6J("ngIf",i.validateForm("f_last_name")),t.xp6(13),t.Q6J("ngIf",i.validateForm("f_gender")),t.xp6(29),t.Q6J("ngIf",i.validateForm("relationship")),t.xp6(5),t.Q6J("ngIf",i.validateForm("f_email")),t.xp6(5),t.Q6J("ngIf",i.validateForm("f_phone_number")),t.xp6(5),t.Q6J("ngIf",!i.isNew&&i.patientActive&&i.patientActive.status),t.xp6(1),t.Q6J("ngIf",i.isNew))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,u.O5,c.EJ,c.YN,c.Kr,o.rH],encapsulation:2}),n})(),kt=(()=>{class n{constructor(e,i,r){this.patientService=e,this.authService=i,this.router=r}ngOnInit(){}createPatient(e){const i=e.gender;e=Object.assign(Object.assign({},e),{id_user:this.authService.userActive.id_user,image:"female"===i?A.R.FEMALE:"male"===i?A.R.MALE:A.R.OTHER}),this.patientService.createPatient(e).subscribe({next:()=>{this.router.navigate(["/patients"]),g().fire("Paciente creado correctamente","","success")},error:r=>{g().fire("Ocurri\xf3 un error al crear paciente","intentelo de nuevo","error")}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.e),t.Y36(x.e),t.Y36(o.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-new-patient"]],decls:3,vars:0,consts:[[1,"row"],[1,"col-xl-6","mx-auto"],[3,"patient"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-patient-form",2),t.NdJ("patient",function(s){return i.createPatient(s)}),t.qZA()()())},directives:[G],encapsulation:2}),n})();function Yt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeStatus(!1)}),t._UZ(4,"i",14),t._uU(5,"Suspender "),t.qZA()()()()}}function Dt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"h3",15),t._uU(2," Paciente suspendido "),t.qZA(),t.TgZ(3,"div",16)(4,"div",11)(5,"div",12)(6,"button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeStatus(!0)}),t._UZ(7,"i",18),t._uU(8,"Habilitar "),t.qZA()()()()()}}let Mt=(()=>{class n{constructor(){this.newStatus=new t.vpe}ngOnInit(){}get getAddress(){const{street:e,cp:i,city:r,country:s}=this.patientActive;return`${e}, CP. ${i} ${r}, ${s}`}changeStatus(e){this.newStatus.emit(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-card-patient-detail"]],inputs:{patientActive:"patientActive"},outputs:{newStatus:"newStatus"},decls:15,vars:7,consts:[[1,"card","border-top","border-0","border-4","border-info","radius-10"],[1,"card-body"],[1,"d-flex","flex-column","align-items-center","text-center","my-3"],["alt","Admin","width","150",1,"rounded-circle","p-1","bg-info",3,"src"],[1,"mt-3"],[1,"text-muted"],[1,"bx","bxs-home","font-15","mx-1"],[1,"bx","bxs-phone","font-15","mx-1"],["class","row mt-3",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"row","mt-3"],[1,"col-12"],[1,"d-grid"],[1,"btn","btn-danger","radius-10",3,"click"],[1,"bx","bx-block"],[1,"text-danger","text-center","my-3"],[1,"row"],[1,"btn","btn-primary","radius-10",3,"click"],[1,"bx","bx-check-circle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"div",4)(5,"h4"),t._uU(6),t.qZA()()(),t.TgZ(7,"h6",5),t._UZ(8,"i",6),t._uU(9),t.qZA(),t.TgZ(10,"h6",5),t._UZ(11,"i",7),t._uU(12),t.qZA(),t.YNc(13,Yt,6,0,"div",8),t.YNc(14,Dt,9,0,"div",9),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("src",i.patientActive.image,t.LSH),t.xp6(3),t.AsE("",i.patientActive.name," ",i.patientActive.last_name," "),t.xp6(3),t.Oqu(i.getAddress),t.xp6(3),t.Oqu(i.patientActive.phone_number),t.xp6(1),t.Q6J("ngIf",i.patientActive.status),t.xp6(1),t.Q6J("ngIf",!i.patientActive.status))},directives:[u.O5],encapsulation:2}),n})();var Rt=l(8386);function Lt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().getUsers()}),t._UZ(1,"i",13),t.qZA()}}function $t(n,a){1&n&&t._UZ(0,"i",14)}function Ht(n,a){if(1&n&&(t.TgZ(0,"div",6),t._UZ(1,"img",7),t.TgZ(2,"div",8)(3,"h5"),t._uU(4),t.qZA()()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.userSelected.image,t.LSH),t.xp6(3),t.AsE("",e.userSelected.name," ",e.userSelected.last_name," ")}}function jt(n,a){if(1&n&&(t.TgZ(0,"option",21),t._uU(1),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("value",e.id_user)("selected",e.id_user===(null==i.patientActive.user?null:i.patientActive.user.id_user)),t.xp6(1),t.hij(" ",e.id_user+" - "+e.name+" "+e.last_name," ")}}function Bt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveChanges()}),t._UZ(1,"i",23),t.qZA()}}function Vt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",15)(1,"select",16),t.NdJ("change",function(r){return t.CHM(e),t.oxw().selectUser(r.target)}),t.YNc(2,jt,2,3,"option",17),t.qZA(),t.YNc(3,Bt,2,0,"button",18),t.TgZ(4,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeUser=!1}),t._UZ(5,"i",20),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.usersActive),t.xp6(1),t.Q6J("ngIf",e.userIdSelected!==(null==e.patientActive.user?null:e.patientActive.user.id_user))}}let Gt=(()=>{class n{constructor(e){this.userService=e,this.userChanged=new t.vpe,this.changeUser=!1}ngOnInit(){console.log(this.patientActive)}getUsers(){var e;this.changeUser=!0,this.userIdSelected=null===(e=this.patientActive.user)||void 0===e?void 0:e.id_user,this.userService.getUsers(!0).subscribe(({users:i})=>this.usersActive=i)}selectUser(e){this.userIdSelected=Number(e.value),this.userSelected=this.usersActive.find(i=>i.id_user===this.userIdSelected)}saveChanges(){this.changeUser=!1,this.userChanged.emit(this.userIdSelected)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Rt.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-card-user-detail"]],inputs:{patientActive:"patientActive"},outputs:{userChanged:"userChanged"},decls:15,vars:7,consts:[[1,"card","border-top","border-0","border-4","border-success","radius-10"],[1,"card-body"],[1,"d-flex","align-items-center","justify-content-between","mb-3","flex-wrap"],[1,"text-muted","m-0"],["type","button","class","btn btn-outline-secondary btn-sm radius-10",3,"click",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","gap-2","flex-wrap"],[1,"d-flex","flex-column","align-items-center","text-center","my-2"],["alt","Admin","width","100",1,"rounded-circle","p-1","bg-success",3,"src"],[1,"mt-3"],["class","bx bx-right-arrow-circle font-35",4,"ngIf"],["class","d-flex flex-column align-items-center text-center my-2",4,"ngIf"],["class","d-flex align-items-center justify-content-between gap-2",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-sm","radius-10",3,"click"],[1,"bx","bx-pencil","me-0"],[1,"bx","bx-right-arrow-circle","font-35"],[1,"d-flex","align-items-center","justify-content-between","gap-2"],[1,"form-select","form-select-sm","m-0",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["type","button","class","btn btn-outline-success btn-sm radius-10",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger","btn-sm","radius-10",3,"click"],[1,"bx","bx-x","me-0"],[3,"value","selected"],["type","button",1,"btn","btn-outline-success","btn-sm","radius-10",3,"click"],[1,"bx","bx-check","me-0"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),t._uU(4,"DENTISTA A CARGO"),t.qZA(),t.YNc(5,Lt,2,0,"button",4),t.qZA(),t.TgZ(6,"div",5)(7,"div",6),t._UZ(8,"img",7),t.TgZ(9,"div",8)(10,"h5"),t._uU(11),t.qZA()()(),t.YNc(12,$t,1,0,"i",9),t.YNc(13,Ht,5,3,"div",10),t.qZA(),t.YNc(14,Vt,6,2,"div",11),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("ngIf",!i.changeUser&&i.patientActive.status),t.xp6(3),t.Q6J("src",null==i.patientActive.user?null:i.patientActive.user.image,t.LSH),t.xp6(3),t.AsE("",null==i.patientActive.user?null:i.patientActive.user.name," ",null==i.patientActive.user?null:i.patientActive.user.last_name," "),t.xp6(1),t.Q6J("ngIf",i.changeUser&&i.userIdSelected!==(null==i.patientActive.user?null:i.patientActive.user.id_user)),t.xp6(1),t.Q6J("ngIf",i.changeUser&&i.userIdSelected!==(null==i.patientActive.user?null:i.patientActive.user.id_user)),t.xp6(1),t.Q6J("ngIf",i.changeUser))},directives:[u.O5,u.sg,c.YN,c.Kr],encapsulation:2}),n})(),Kt=(()=>{class n{constructor(e){this.patientService=e}ngOnDestroy(){this.patientSub.unsubscribe()}ngOnInit(){this.patientTemp=this.patientService.patientTemp,console.log(this.patientTemp),this.patientSub=this.patientService.patientTempChanged.subscribe(e=>this.patientTemp=e)}updatePatientInfo(e){const i=Number(this.patientTemp.id_patient),r=Number(this.patientTemp.id_familiar);this.patientService.updateInfo(i,r,e)}getPatient(){this.patientService.getPatientByUser(Number(this.patientTemp.id_patient),!0).subscribe()}changeStatus(e){this.patientService.changeStatus(Number(this.patientTemp.id_patient),e).subscribe(()=>this.getPatient())}changeUser(e){this.patientService.changeUser(Number(this.patientTemp.id_patient),e).subscribe(i=>{0===i[0]?g().fire("Ocurrio un error al cambiar usuario","","error"):this.getPatient()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-patient-detail"]],decls:6,vars:4,consts:[[1,"row"],[1,"col-4"],[3,"patientActive","newStatus"],[3,"patientActive","userChanged"],[1,"col-8"],[3,"isNew","patientActive","patient"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-card-patient-detail",2),t.NdJ("newStatus",function(s){return i.changeStatus(s)}),t.qZA(),t.TgZ(3,"app-card-user-detail",3),t.NdJ("userChanged",function(s){return i.changeUser(s)}),t.qZA()(),t.TgZ(4,"div",4)(5,"app-patient-form",5),t.NdJ("patient",function(s){return i.updatePatientInfo(s)}),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("patientActive",i.patientTemp),t.xp6(1),t.Q6J("patientActive",i.patientTemp),t.xp6(2),t.Q6J("isNew",!1)("patientActive",i.patientTemp))},directives:[Mt,Gt,G],encapsulation:2}),n})();var Xt=l(5760),zt=l(3333),Wt=l(2775),K=l(3599),te=l(8115);function ee(n,a){if(1&n&&(t.TgZ(0,"div",15),t._UZ(1,"app-card-icon-right",16),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("data",e)}}function ne(n,a){1&n&&(t.TgZ(0,"h2",17),t._uU(1," Pacientes "),t.qZA())}function ie(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"select",18),t.NdJ("change",function(r){return t.CHM(e),t.oxw().changeOptionGet(r)}),t.TgZ(1,"option",19),t._uU(2,"Mis pacientes"),t.qZA(),t.TgZ(3,"option",20),t._uU(4,"Todos"),t.qZA()()}}function oe(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-input-search",24),t.NdJ("text",function(r){return t.CHM(e),t.oxw(2).findByFullname(r)}),t.qZA()}2&n&&t.Q6J("findName","paciente")}function ae(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-dropdown-page-list",25),t.NdJ("limit",function(r){return t.CHM(e),t.oxw(2).changeLimit(r)}),t.qZA()}}function re(n,a){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,oe,1,1,"app-input-search",22),t.YNc(2,ae,1,0,"app-dropdown-page-list",23),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.patients&&e.patients.length>0)}}function se(n,a){1&n&&t._UZ(0,"app-text-alert",26),2&n&&t.Q6J("icon","bx-user")("textColor","info")("text","No hay pacientes")}function ce(n,a){1&n&&(t.TgZ(0,"th"),t._uU(1,"Dentista a cargo"),t.qZA())}function le(n,a){if(1&n&&(t.TgZ(0,"td"),t._UZ(1,"img",35),t._uU(2),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",null==e.user?null:e.user.image,t.LSH),t.xp6(1),t.AsE(" ",null==e.user?null:e.user.name," ",null==e.user?null:e.user.last_name," ")}}function pe(n,a){1&n&&(t.TgZ(0,"span",43),t._uU(1,"Activo"),t.qZA())}function de(n,a){1&n&&(t.TgZ(0,"span",44),t._uU(1,"Suspendido"),t.qZA())}function ue(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",45),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(2).changeStatus(r.name+" "+r.last_name,r.id_patient)}),t._UZ(1,"i",46),t.qZA()}}function _e(n,a){if(1&n&&(t.TgZ(0,"a",47),t._UZ(1,"i",48),t.qZA()),2&n){const e=t.oxw().$implicit;t.MGl("routerLink","/patients/patient/",e.id_patient,"/record")}}function me(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",34),t._UZ(4,"img",35),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.YNc(12,le,3,3,"td",29),t.TgZ(13,"td",30),t.YNc(14,pe,2,0,"span",36),t.YNc(15,de,2,0,"span",37),t.qZA(),t.TgZ(16,"td")(17,"div",38),t.YNc(18,ue,2,0,"a",39),t.TgZ(19,"a",40),t._UZ(20,"i",41),t.qZA(),t.YNc(21,_e,2,1,"a",42),t.qZA()()()),2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(2),t.hij(" # ",e.id_patient," "),t.xp6(2),t.Q6J("src",e.image,t.LSH),t.xp6(1),t.AsE(" ",e.name," ",e.last_name," "),t.xp6(2),t.hij(" ",e.phone_number," "),t.xp6(2),t.AsE(" ",e.familiar.familiar_name," ",e.familiar.familiar_last_name," "),t.xp6(2),t.hij(" ",e.familiar.familiar_phone_number," "),t.xp6(1),t.Q6J("ngIf",i.showColumn),t.xp6(2),t.Q6J("ngIf",e.status),t.xp6(1),t.Q6J("ngIf",!e.status),t.xp6(3),t.Q6J("ngIf",e.status),t.xp6(1),t.MGl("routerLink","/patients/",e.id_patient,""),t.xp6(2),t.Q6J("ngIf",e.status)}}function ge(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-pagination",49),t.NdJ("changedOffset",function(r){return t.CHM(e),t.oxw(2).changePage(r)}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("limit",e.getLimitPagination)("total",e.totalPatients)}}function he(n,a){if(1&n&&(t.TgZ(0,"div",27)(1,"table",28)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"# Paciente"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Paciente"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Tel\xe9fono"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Persona responsable"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Tel\xe9fono del responsable"),t.qZA(),t.YNc(14,ce,2,0,"th",29),t.TgZ(15,"th",30),t._uU(16,"Estado"),t.qZA(),t.TgZ(17,"th",31),t._uU(18,"Acciones"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,me,22,14,"tr",32),t.qZA()(),t.YNc(21,ge,1,2,"app-pagination",33),t.qZA()),2&n){const e=t.oxw();t.xp6(14),t.Q6J("ngIf",e.showColumn),t.xp6(6),t.Q6J("ngForOf",e.patients),t.xp6(1),t.Q6J("ngIf",e.totalPatients>0&&e.showPagination)}}let fe=(()=>{class n{constructor(e,i){this.patientService=e,this.authService=i,this.cardsIconData=[{title:"Mis Pacientes",quantity:0,icon:"bxs-user",color:"primary",bg:"scooter"},{title:"Pacientes activos",quantity:0,icon:"bx-check",color:"success",bg:"ohhappiness"},{title:"Pacientes inactivos",quantity:0,icon:"bx-block",color:"danger",bg:"bloody"}],this.optionsSearch={limit:5,offset:0,fullname:""},this.totalPatients=0,this.showPagination=!0,this.findingByFullname=!1,this.allPatients=!1,this.userRole=i.userActive.role}ngOnInit(){this.getPatients()}changeOptionGet(e){this.allPatients=JSON.parse(e.target.value);const i="Pacientes";this.findingByFullname=!1,this.optionsSearch.fullname="",this.cardsIconData[0].title=this.allPatients?i:`Mis ${i}`,this.getPatients()}getPatients(){this.allPatients?this.patientService.getPatients(this.optionsSearch).subscribe(e=>this.setData(e)):this.patientService.getPatientsByUser(this.optionsSearch,Number(this.authService.userActive.id_user)).subscribe(e=>this.setData(e))}setData(e){const{patients:i,totalActive:r,totalInactive:s}=e;this.showPagination=!(this.optionsSearch.fullname&&this.optionsSearch.fullname.length>0),this.patients=i,this.totalPatients=r+s,this.cardsIconData[0].quantity=this.totalPatients,this.cardsIconData[1].quantity=r,this.cardsIconData[2].quantity=s}findByFullname(e){this.findingByFullname=!0,0===e.trim().length&&(this.findingByFullname=!1),this.showPagination=!1,this.optionsSearch.fullname=e,this.getPatients()}changeLimit(e){this.optionsSearch.limit=e,this.optionsSearch.offset=0,this.getPatients()}get getLimitPagination(){return this.optionsSearch.limit}changePage(e){this.optionsSearch.offset=e,this.getPatients()}changeStatus(e,i){g().fire({title:`\xbfEst\xe1s seguro de suspender a '${e}'?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Si, suspender"}).then(r=>{r.isConfirmed&&this.patientService.changeStatus(Number(i),!1).subscribe({next:()=>{this.getPatients()},error:s=>{g().fire("Ocurri\xf3 un error","intentalo de nuevo","error")}})})}get showOptions(){return this.patients&&this.patients.length>0||this.findingByFullname}get showColumn(){return"ADMIN"===this.authService.userActive.role&&this.allPatients}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.e),t.Y36(x.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-patients"]],decls:16,vars:7,consts:[[1,"row","row-cols-1","row-cols-md-2","row-cols-xl-3"],["class","col",4,"ngFor","ngForOf"],[1,"row"],[1,"col-lg-12"],[1,"card","radius-10"],[1,"card-body"],[1,"d-flex","align-items-center","flex-wrap","w-100","mb-3",3,"ngClass"],["class","mb-0",4,"ngIf"],[1,"d-flex","justify-content-end","align-items-center","gap-2"],["class","form-select radius-10","style","width: auto;",3,"change",4,"ngIf"],["type","button","routerLink","/patients/new",1,"btn","btn-outline-primary","px-3","radius-10"],[1,"bx","bx-plus","mr-1"],["class","d-lg-flex align-items-center justify-content-between mb-4",4,"ngIf"],[3,"icon","textColor","text",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"col"],[3,"data"],[1,"mb-0"],[1,"form-select","radius-10",2,"width","auto",3,"change"],["value","false"],["value","true"],[1,"d-lg-flex","align-items-center","justify-content-between","mb-4"],["style","width: 32%;",3,"findName","text",4,"ngIf"],[3,"limit",4,"ngIf"],[2,"width","32%",3,"findName","text"],[3,"limit"],[3,"icon","textColor","text"],[1,"table-responsive"],[1,"table","align-middle","table-hover"],[4,"ngIf"],[1,"text-center"],[1,"text-end"],[4,"ngFor","ngForOf"],[3,"limit","total","changedOffset",4,"ngIf"],[1,"my-auto"],["alt","user-avatar",1,"user-img",3,"src"],["class","badge rounded-pill text-success bg-light-success p-2 text-uppercase px-3",4,"ngIf"],["class","badge rounded-pill text-danger bg-light-danger p-2 text-uppercase px-3",4,"ngIf"],[1,"d-flex","justify-content-end","order-actions"],["class","cursor text-danger bg-light-danger",3,"click",4,"ngIf"],[1,"ms-2","cursor","bg-light-warning",3,"routerLink"],[1,"bx","bx-pencil"],["class","ms-2 text-info bg-light-info",3,"routerLink",4,"ngIf"],[1,"badge","rounded-pill","text-success","bg-light-success","p-2","text-uppercase","px-3"],[1,"badge","rounded-pill","text-danger","bg-light-danger","p-2","text-uppercase","px-3"],[1,"cursor","text-danger","bg-light-danger",3,"click"],[1,"bx","bx-block"],[1,"ms-2","text-info","bg-light-info",3,"routerLink"],[1,"bx","bx-id-card"],[3,"limit","total","changedOffset"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,ee,2,1,"div",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t.YNc(7,ne,2,0,"h2",7),t.TgZ(8,"div",8),t.YNc(9,ie,5,0,"select",9),t.TgZ(10,"button",10),t._UZ(11,"i",11),t._uU(12,"Nuevo Paciente "),t.qZA()()(),t.YNc(13,re,3,2,"div",12),t.YNc(14,se,1,3,"app-text-alert",13),t.YNc(15,he,22,3,"div",14),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.cardsIconData),t.xp6(5),t.Q6J("ngClass",i.showOptions?"justify-content-between":"justify-content-end"),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(2),t.Q6J("ngIf","ADMIN"===i.userRole),t.xp6(4),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.patients&&0===i.patients.length),t.xp6(1),t.Q6J("ngIf",i.patients&&i.patients.length>0))},directives:[u.sg,Xt.z,u.mk,u.O5,o.rH,zt.V,Wt.n,K._,o.yS,te.Q],encapsulation:2}),n})();var k=l(3400),D=l(9483),ve=l(2340),xe=l(520);const L=ve.N.base_url;let X=(()=>{class n{constructor(e,i){this.http=e,this.recordService=i}get token(){return sessionStorage.getItem("token")||""}get headers(){return{headers:{Authorization:`Bearer ${this.token}`}}}getTeeth(e){return this.http.get(`${L}/teeth/patient/${e}`,this.headers)}create(e){this.http.post(`${L}/teeth`,e,this.headers).subscribe({next:()=>{g().fire("Servicio agregado correctamente","","success"),this.recordService.changedRecordsHome.emit(!0)},error:()=>{g().fire("Ocurrio un error intentalo de nuevo","","error")}})}update(e,i){this.http.patch(`${L}/teeth/${e}`,i,this.headers).subscribe(s=>{g().fire("Diente actualizado correctamente","","success"),this.recordService.changedRecordsHome.emit(!0)})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(xe.eN),t.LFG(k.B))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var z=l(9944);function be(n,a){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t._UZ(3,"img",4),t.TgZ(4,"div",5)(5,"div",6)(6,"div"),t._UZ(7,"i",7),t.qZA(),t.TgZ(8,"h2",8),t._uU(9,"Informaci\xf3n General"),t.qZA()(),t._UZ(10,"hr",9),t.TgZ(11,"div",10)(12,"h5"),t._UZ(13,"i",11),t._uU(14),t.qZA(),t.TgZ(15,"h5"),t._UZ(16,"i",12),t._uU(17),t.qZA(),t.TgZ(18,"h5"),t._UZ(19,"i",13),t._uU(20),t.qZA(),t.TgZ(21,"h5"),t._UZ(22,"i",14),t._uU(23),t.qZA()()()()()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("src",e.patient.image,t.LSH),t.xp6(11),t.hij("Paciente: ",e.patient.id_patient,""),t.xp6(3),t.AsE("",e.patient.name," ",e.patient.last_name,""),t.xp6(3),t.Oqu(e.getAddress),t.xp6(3),t.Oqu(e.patient.phone_number)}}let Ze=(()=>{class n{constructor(){}ngOnInit(){}get getAddress(){const{street:e,cp:i,city:r,country:s}=this.patient;return`${e}, CP. ${i} ${r}, ${s}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-card-patient-info"]],inputs:{patient:"patient"},decls:1,vars:1,consts:[["class","card radius-10",4,"ngIf"],[1,"card","radius-10"],[1,"card-body","p-3"],[1,"d-flex","align-items-center","text-center","gap-3","flex-wrap"],["alt","Admin","width","110",1,"rounded-circle","p-1","bg-info",3,"src"],[1,"flex-grow-1"],[1,"card-title","d-flex","align-items-center","gap-2"],[1,"bx","bx-user","me-1","font-30","text-info"],[1,"mb-0","text-info"],[1,"my-1"],[1,"d-flex","align-items-center","gap-2","flex-wrap","mt-3"],[1,"bx","bx-hash","mx-2"],[1,"bx","bxs-user","mx-2"],[1,"bx","bxs-home","mx-2"],[1,"bx","bxs-phone","mx-2"]],template:function(e,i){1&e&&t.YNc(0,be,24,6,"div",0),2&e&&t.Q6J("ngIf",i.patient)},directives:[u.O5],encapsulation:2}),n})();var Q=l(8940);function Te(n,a){1&n&&(t.TgZ(0,"span",12),t._uU(1,"Pendiente"),t.qZA())}function Ae(n,a){1&n&&(t.TgZ(0,"span",13),t._uU(1,"Pago Pendiente"),t.qZA())}function Ce(n,a){1&n&&(t.TgZ(0,"span",14),t._uU(1,"Completado"),t.qZA())}function qe(n,a){1&n&&(t.TgZ(0,"span",13),t._uU(1,"Cancelado"),t.qZA())}function Ue(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",19),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2).$implicit;return t.oxw(2).serviceDone(r.id_record)}),t._UZ(1,"i",20),t.qZA()}}function Ne(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",21),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2).$implicit;return t.oxw(2).serviceCancelled(r.id_record,r.service_name)}),t._UZ(1,"i",22),t.qZA()}}function Se(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2).$implicit;return t.oxw(2).servicePaid(r.id_record)}),t._UZ(1,"i",24),t.qZA()}}function ye(n,a){if(1&n&&(t.TgZ(0,"div",15),t.YNc(1,Ue,2,0,"a",16),t.YNc(2,Ne,2,0,"a",17),t.YNc(3,Se,2,0,"a",18),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","PENDING"===e.status),t.xp6(1),t.Q6J("ngIf","PENDING"===e.status),t.xp6(1),t.Q6J("ngIf","PENDING_PAYMENT"===e.status)}}function Pe(n,a){1&n&&(t.TgZ(0,"div",25)(1,"a",26),t._UZ(2,"i",27),t.qZA()())}function Ie(n,a){if(1&n&&(t.TgZ(0,"tr",6)(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",3),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"td",3),t.YNc(15,Te,2,0,"span",7),t.YNc(16,Ae,2,0,"span",8),t.YNc(17,Ce,2,0,"span",9),t.YNc(18,qe,2,0,"span",8),t.qZA(),t.TgZ(19,"td"),t.YNc(20,ye,4,3,"div",10),t.YNc(21,Pe,3,0,"div",11),t.qZA()()),2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(2),t.hij(" ",t.xi3(3,11,e.createdAt,"short")," "),t.xp6(3),t.hij(" ",e.service_name," "),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",t.xi3(10,14,e.price,"$ ")," "),t.xp6(3),t.hij(" ",t.xi3(13,17,e.quantity*e.price,"$ ")," "),t.xp6(3),t.Q6J("ngIf","PENDING"===e.status),t.xp6(1),t.Q6J("ngIf","PENDING_PAYMENT"===e.status),t.xp6(1),t.Q6J("ngIf","COMPLETED"===e.status),t.xp6(1),t.Q6J("ngIf","CANCELLED"===e.status),t.xp6(2),t.Q6J("ngIf",i.isHome),t.xp6(1),t.Q6J("ngIf",!i.isHome)}}function Fe(n,a){if(1&n&&(t.TgZ(0,"h1",28),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" Total a pagar: ",t.xi3(2,1,e.getTotalPayment,"$ ")," ")}}function Je(n,a){if(1&n&&(t.TgZ(0,"div",1)(1,"table",2)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Fecha de expedici\xf3n"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Servicio"),t.qZA(),t.TgZ(8,"th",3),t._uU(9,"Cantidad"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"$ Precio"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"$ Subtotal"),t.qZA(),t.TgZ(14,"th",3),t._uU(15,"Estado"),t.qZA(),t.TgZ(16,"th",3),t._uU(17,"Acciones"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Ie,22,20,"tr",4),t.qZA()(),t.YNc(20,Fe,3,4,"h1",5),t.qZA()),2&n){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",e.records),t.xp6(1),t.Q6J("ngIf",e.records&&e.isHome)}}let we=(()=>{class n{constructor(e){this.recordService=e,this.isHome=!0}ngOnInit(){}serviceDone(e){this.recordService.changeStatus(e,Q.$.DONE)}servicePaid(e){this.recordService.changeStatus(e,Q.$.PAID)}serviceCancelled(e,i){g().fire({title:"\xbfEst\xe1s seguro de cancelar este servicio?",text:`'${i}'`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Si, cancelar"}).then(r=>{r.isConfirmed&&this.recordService.changeStatus(e,Q.$.CANCEL)})}get getTotalPayment(){return this.records.filter(i=>i.status===Q.r.PENDING_PAYMENT).map(i=>(i.total=i.quantity*i.price,i)).reduce((i,r)=>i+Number(r.total),0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(k.B))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-table-record"]],inputs:{records:"records",isHome:"isHome"},decls:1,vars:1,consts:[["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table","align-middle","table-hover"],[1,"text-center"],["style","height: 55px;",4,"ngFor","ngForOf"],["class","d-flex justify-content-end align-items-center",4,"ngIf"],[2,"height","55px"],["class","badge rounded-pill text-primary bg-light-primary p-2 text-uppercase px-3",4,"ngIf"],["class","badge rounded-pill text-danger bg-light-danger p-2 text-uppercase px-3",4,"ngIf"],["class","badge rounded-pill text-success bg-light-success p-2 text-uppercase px-3",4,"ngIf"],["class","d-flex justify-content-end order-actions",4,"ngIf"],["class","d-flex justify-content-center order-actions",4,"ngIf"],[1,"badge","rounded-pill","text-primary","bg-light-primary","p-2","text-uppercase","px-3"],[1,"badge","rounded-pill","text-danger","bg-light-danger","p-2","text-uppercase","px-3"],[1,"badge","rounded-pill","text-success","bg-light-success","p-2","text-uppercase","px-3"],[1,"d-flex","justify-content-end","order-actions"],["class","cursor ms-2 bg-light-success text-success",3,"click",4,"ngIf"],["class","cursor ms-2 bg-light-danger text-danger",3,"click",4,"ngIf"],["class","cursor ms-2 bg-light-warning",3,"click",4,"ngIf"],[1,"cursor","ms-2","bg-light-success","text-success",3,"click"],[1,"bx","bx-check-circle"],[1,"cursor","ms-2","bg-light-danger","text-danger",3,"click"],[1,"bx","bx-block"],[1,"cursor","ms-2","bg-light-warning",3,"click"],[1,"bx","bx-dollar-circle"],[1,"d-flex","justify-content-center","order-actions"],[1,"cursor","ms-2","bg-light-primary","text-primary"],[1,"bx","bx-time"],[1,"d-flex","justify-content-end","align-items-center"]],template:function(e,i){1&e&&t.YNc(0,Je,21,2,"div",0),2&e&&t.Q6J("ngIf",i.records)},directives:[u.O5,u.sg],pipes:[u.uU,u.H9],encapsulation:2}),n})();function Oe(n,a){if(1&n&&(t.TgZ(0,"option",41),t._uU(1),t.qZA()),2&n){const e=a.$implicit,i=t.oxw();t.Q6J("value",e.id_service)("selected",e.id_service===(null==i.toothSelected.record?null:i.toothSelected.record.id_service)),t.xp6(1),t.hij(" ",e.name,"")}}const Y=function(n){return{"border-bottom":n}};let Qe=(()=>{class n{constructor(e,i,r){this.serviceOfferService=e,this.patientService=i,this.toothService=r,this.isNew=!0,this.patientIdActive=Number(i.patientTemp.id_patient)}ngOnDestroy(){this.servicesActive.unsubscribe()}ngOnChanges(e){var i;this.toothSelected=e.tooth.currentValue,this.isNew=!(null===(i=this.toothSelected)||void 0===i?void 0:i.record)}ngOnInit(){this.servicesActive=this.serviceOfferService.servicesActiveOdontogram.subscribe(e=>{var i;this.services=e,e.length>0&&(!this.toothSelected.record||!(null===(i=this.tooth)||void 0===i?void 0:i.color))&&(this.toothSelected.color=this.services[0].color,this.toothSelected.id_service=this.services[0].id_service)})}saveTooth(){var e;if(this.isNew)this.toothPartSelected()&&this.toothService.create({id_service:this.toothSelected.id_service,tooth_number:this.toothSelected.tooth_number,vestibular:this.toothSelected.vestibular||!1,ligual:this.toothSelected.ligual||!1,distal:this.toothSelected.distal||!1,mesial:this.toothSelected.mesial||!1,oclusal:this.toothSelected.oclusal||!1,id_patient:this.patientIdActive});else if(this.toothPartSelected()){const i=this.toothSelected.id_service||(null===(e=this.toothSelected.record)||void 0===e?void 0:e.id_service),r={id_service:Number(i),vestibular:this.toothSelected.vestibular||!1,ligual:this.toothSelected.ligual||!1,distal:this.toothSelected.distal||!1,mesial:this.toothSelected.mesial||!1,oclusal:this.toothSelected.oclusal||!1},{id_tooth:s}=this.toothSelected;this.toothService.update(Number(s),r)}}toothPartSelected(){const{vestibular:e,ligual:i,distal:r,mesial:s,oclusal:d}=this.toothSelected;return e||i||r||s||d}get getTitleModal(){return(this.isNew?"Agregar ":"Editar ")+"Servicio"}changeService(e){var i;const r=Number(e.value);this.toothSelected.id_service=r,this.toothSelected.color=null===(i=this.services.find(s=>s.id_service===r))||void 0===i?void 0:i.color}changeColor(e,i){const r=i.checked;switch(e){case"vestibular":this.toothSelected.vestibular=r;break;case"ligual":this.toothSelected.ligual=r;break;case"oclusal":this.toothSelected.oclusal=r;break;case"distal":this.toothSelected.distal=r;break;case"mesial":this.toothSelected.mesial=r;break;default:return}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D._),t.Y36(f.e),t.Y36(X))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-modal-odontogram"]],inputs:{tooth:"tooth"},features:[t.TTD],decls:59,vars:25,consts:[["id","modalOdontogram","tabindex","-1","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","d-flex","text-info"],[1,"bx","bx-briefcase","me-1","font-30"],["data-bs-dismiss","modal","aria-label","Close",1,"bx","bx-x-circle","text-danger","font-30","cursor"],[1,"modal-body"],[1,"mb-3"],["for","selectService",1,"form-label"],["id","selectService",1,"form-select","radius-10",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"row","m-3"],[1,"col-8"],[1,"text-center"],[1,"row"],[1,"col-6"],[1,"form-check","form-switch","gap-2","d-flex","align-items-center","my-2",2,"padding-left","0"],["type","checkbox","id","switchVestibular",1,"form-check-input","switch-odontogram",3,"checked","change"],["for","switchVestibular",1,"form-check-label"],["type","checkbox","id","switchLigual",1,"form-check-input","switch-odontogram",3,"checked","change"],["for","switchLigual",1,"form-check-label"],["type","checkbox","id","switchOclusal",1,"form-check-input","switch-odontogram",3,"checked","change"],["for","switchOclusal",1,"form-check-label"],["type","checkbox","id","switchMesial",1,"form-check-input","switch-odontogram",3,"checked","change"],["for","switchMesial",1,"form-check-label"],["type","checkbox","id","switchDistal",1,"form-check-input","switch-odontogram",3,"checked","change"],["for","switchDistal",1,"form-check-label"],[1,"col-4"],[1,"d-flex","justify-content-center","flex-wrap"],["id","18",1,"buttons"],["id","vestibular",1,"button-outside",3,"ngStyle"],["id","ligual",1,"button-outside",3,"ngStyle"],["id","oclusal",1,"button-inside",3,"ngStyle"],["id","distal",1,"button-outside",3,"ngStyle"],["id","mesial",1,"button-outside",3,"ngStyle"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger","radius-10"],[1,"bx","bx-x"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success","radius-10",3,"click"],[1,"bx",3,"ngClass"],[3,"value","selected"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._UZ(5,"i",5),t._uU(6),t.qZA(),t._UZ(7,"i",6),t.qZA(),t.TgZ(8,"div",7)(9,"h2",8),t._uU(10),t.qZA(),t.TgZ(11,"label",9),t._uU(12,"Servicios disponibles"),t.qZA(),t.TgZ(13,"select",10),t.NdJ("change",function(s){return i.changeService(s.target)}),t.YNc(14,Oe,2,3,"option",11),t.qZA(),t.TgZ(15,"div",12)(16,"div",13)(17,"h6",14),t._uU(18,"Parte"),t.qZA(),t.TgZ(19,"div",15)(20,"div",16)(21,"div",17)(22,"input",18),t.NdJ("change",function(s){return i.changeColor("vestibular",s.target)}),t.qZA(),t.TgZ(23,"label",19),t._uU(24,"Vestibular"),t.qZA()(),t.TgZ(25,"div",17)(26,"input",20),t.NdJ("change",function(s){return i.changeColor("ligual",s.target)}),t.qZA(),t.TgZ(27,"label",21),t._uU(28,"Ligual"),t.qZA()(),t.TgZ(29,"div",17)(30,"input",22),t.NdJ("change",function(s){return i.changeColor("oclusal",s.target)}),t.qZA(),t.TgZ(31,"label",23),t._uU(32,"Oclusal"),t.qZA()()(),t.TgZ(33,"div",16)(34,"div",17)(35,"input",24),t.NdJ("change",function(s){return i.changeColor("mesial",s.target)}),t.qZA(),t.TgZ(36,"label",25),t._uU(37,"Mesial"),t.qZA()(),t.TgZ(38,"div",17)(39,"input",26),t.NdJ("change",function(s){return i.changeColor("distal",s.target)}),t.qZA(),t.TgZ(40,"label",27),t._uU(41,"Distal"),t.qZA()()()()(),t.TgZ(42,"div",28)(43,"h6",14),t._uU(44,"Vista Previa"),t.qZA(),t.TgZ(45,"div",29)(46,"section",30),t._UZ(47,"div",31)(48,"div",32)(49,"div",33)(50,"div",34)(51,"div",35),t.qZA()()()()(),t.TgZ(52,"div",36)(53,"button",37),t._UZ(54,"i",38),t._uU(55," Cancelar "),t.qZA(),t.TgZ(56,"button",39),t.NdJ("click",function(){return i.saveTooth()}),t._UZ(57,"i",40),t._uU(58),t.qZA()()()()()),2&e&&(t.xp6(6),t.hij(" ",i.getTitleModal," "),t.xp6(4),t.hij(" # Pieza: ",null==i.toothSelected?null:i.toothSelected.tooth_number," "),t.xp6(4),t.Q6J("ngForOf",i.services),t.xp6(8),t.Q6J("checked",null==i.toothSelected?null:i.toothSelected.vestibular),t.xp6(4),t.Q6J("checked",null==i.toothSelected?null:i.toothSelected.ligual),t.xp6(4),t.Q6J("checked",null==i.toothSelected?null:i.toothSelected.oclusal),t.xp6(5),t.Q6J("checked",null==i.toothSelected?null:i.toothSelected.mesial),t.xp6(4),t.Q6J("checked",null==i.toothSelected?null:i.toothSelected.distal),t.xp6(8),t.Q6J("ngStyle",t.VKq(15,Y,null!=i.toothSelected&&i.toothSelected.vestibular?"15px solid "+(null==i.toothSelected?null:i.toothSelected.color):"")),t.xp6(1),t.Q6J("ngStyle",t.VKq(17,Y,null!=i.toothSelected&&i.toothSelected.ligual?"15px solid "+(null==i.toothSelected?null:i.toothSelected.color):"")),t.xp6(1),t.Q6J("ngStyle",t.VKq(19,Y,null!=i.toothSelected&&i.toothSelected.oclusal?"39px solid "+(null==i.toothSelected?null:i.toothSelected.color):"")),t.xp6(1),t.Q6J("ngStyle",t.VKq(21,Y,null!=i.toothSelected&&i.toothSelected.distal?"15px solid "+(null==i.toothSelected?null:i.toothSelected.color):"")),t.xp6(1),t.Q6J("ngStyle",t.VKq(23,Y,null!=i.toothSelected&&i.toothSelected.mesial?"15px solid "+(null==i.toothSelected?null:i.toothSelected.color):"")),t.xp6(6),t.Q6J("ngClass",i.isNew?"bx-check-circle":"bx-save"),t.xp6(1),t.hij("Guardar ",i.isNew?"":"Cambios"," "))},directives:[u.sg,c.YN,c.Kr,u.PC,u.mk],encapsulation:2}),n})();const S=function(n){return{"border-bottom":n}};function Ee(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().getServicesActive(s.tooth_number,"up")}),t.TgZ(1,"span",4),t._uU(2),t.qZA(),t.TgZ(3,"section",5),t._UZ(4,"div",6)(5,"div",7)(6,"div",8)(7,"div",9)(8,"div",10),t.qZA()()}if(2&n){const e=a.$implicit;t.xp6(2),t.Oqu(e.tooth_number),t.xp6(2),t.Q6J("ngStyle",t.VKq(6,S,e.vestibular?"15px solid "+e.color:"")),t.xp6(1),t.Q6J("ngStyle",t.VKq(8,S,e.ligual?"15px solid "+e.color:"")),t.xp6(1),t.Q6J("ngStyle",t.VKq(10,S,e.oclusal?"39px solid "+e.color:"")),t.xp6(1),t.Q6J("ngStyle",t.VKq(12,S,e.distal?"15px solid "+e.color:"")),t.xp6(1),t.Q6J("ngStyle",t.VKq(14,S,e.mesial?"15px solid "+e.color:""))}}function ke(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().getServicesActive(s.tooth_number,"down")}),t.TgZ(1,"section",5),t._UZ(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10),t.qZA(),t.TgZ(7,"span",4),t._uU(8),t.qZA()()}if(2&n){const e=a.$implicit;t.xp6(2),t.Q6J("ngStyle",t.VKq(6,S,e.vestibular?"15px solid "+e.color:"")),t.xp6(1),t.Q6J("ngStyle",t.VKq(8,S,e.ligual?"15px solid "+e.color:"")),t.xp6(1),t.Q6J("ngStyle",t.VKq(10,S,e.oclusal?"39px solid "+e.color:"")),t.xp6(1),t.Q6J("ngStyle",t.VKq(12,S,e.distal?"15px solid "+e.color:"")),t.xp6(1),t.Q6J("ngStyle",t.VKq(14,S,e.mesial?"15px solid "+e.color:"")),t.xp6(2),t.Oqu(e.tooth_number)}}let Ye=(()=>{class n{constructor(e){this.serviceOfferServices=e,this.up=[18,17,16,15,14,13,12,11,21,22,23,24,25,26,27,28],this.down=[48,47,46,45,44,43,42,41,31,32,33,34,35,36,37,38]}ngOnChanges(e){const i=e.teeth.currentValue;i&&this.setData(i)}ngOnInit(){}getServicesActive(e,i){this.toothTemp="up"===i?this.upTeeth.find(r=>r.tooth_number===e):this.downTeeth.find(r=>r.tooth_number===e),this.serviceOfferServices.getServicesActive(!0)}setData(e){this.loadDataTeeth(),e.forEach(i=>{const r=this.up.includes(i.tooth_number),s=this.down.includes(i.tooth_number);r&&this.upTeeth.map(d=>{var T;if(d.tooth_number===i.tooth_number){const{distal:q,ligual:U,mesial:P,oclusal:J,vestibular:w,record:C,id_tooth:O}=i;d.id_tooth=O,d.distal=q,d.ligual=U,d.mesial=P,d.oclusal=J,d.vestibular=w,d.record=C,d.color=null===(T=null==C?void 0:C.service)||void 0===T?void 0:T.color}}),s&&this.downTeeth.map(d=>{var T;if(d.tooth_number===i.tooth_number){const{distal:q,ligual:U,mesial:P,oclusal:J,vestibular:w,record:C,id_tooth:O}=i;d.id_tooth=O,d.distal=q,d.ligual=U,d.mesial=P,d.oclusal=J,d.vestibular=w,d.record=C,d.color=null===(T=null==C?void 0:C.service)||void 0===T?void 0:T.color}})})}loadDataTeeth(){this.downTeeth=[{tooth_number:48},{tooth_number:47},{tooth_number:46},{tooth_number:45},{tooth_number:44},{tooth_number:43},{tooth_number:42},{tooth_number:41},{tooth_number:31},{tooth_number:32},{tooth_number:33},{tooth_number:34},{tooth_number:35},{tooth_number:36},{tooth_number:37},{tooth_number:38}],this.upTeeth=[{tooth_number:18},{tooth_number:17},{tooth_number:16},{tooth_number:15},{tooth_number:14},{tooth_number:13},{tooth_number:12},{tooth_number:11},{tooth_number:21},{tooth_number:22},{tooth_number:23},{tooth_number:24},{tooth_number:25},{tooth_number:26},{tooth_number:27},{tooth_number:28}]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D._))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-odontogram"]],inputs:{teeth:"teeth"},features:[t.TTD],decls:5,vars:3,consts:[[1,"d-flex","justify-content-center","flex-wrap"],["class","tooth","data-bs-target","#modalOdontogram","data-bs-toggle","modal",3,"click",4,"ngFor","ngForOf"],[3,"tooth"],["data-bs-target","#modalOdontogram","data-bs-toggle","modal",1,"tooth",3,"click"],["id","",1,"piece"],["id","18",1,"buttons"],["id","vestibular",1,"button-outside",3,"ngStyle"],["id","ligual",1,"button-outside",3,"ngStyle"],["id","oclusal",1,"button-inside",3,"ngStyle"],["id","distal",1,"button-outside",3,"ngStyle"],["id","mesial",1,"button-outside",3,"ngStyle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ee,9,16,"div",1),t.qZA(),t.TgZ(2,"div",0),t.YNc(3,ke,9,16,"div",1),t.qZA(),t._UZ(4,"app-modal-odontogram",2)),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.upTeeth),t.xp6(2),t.Q6J("ngForOf",i.downTeeth),t.xp6(1),t.Q6J("tooth",i.toothTemp))},directives:[u.sg,u.PC,Qe],encapsulation:2}),n})();function De(n,a){1&n&&(t.TgZ(0,"span",8),t._uU(1,"Pendiente"),t.qZA())}function Me(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw().serviceDone(null==r.record?null:r.record.id_record)}),t._UZ(1,"i",10),t.qZA()}}function Re(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",11),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw().serviceCancelled(null==r.record?null:r.record.id_record,null==r.record?null:r.record.service_name)}),t._UZ(1,"i",12),t.qZA()}}function Le(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",2),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"td",2),t.YNc(15,De,2,0,"span",4),t.qZA(),t.TgZ(16,"td")(17,"div",5),t.YNc(18,Me,2,0,"a",6),t.YNc(19,Re,2,0,"a",7),t.qZA()()()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,8,null==e.record?null:e.record.createdAt,"short")),t.xp6(3),t.Oqu(null==e.record?null:e.record.service_name),t.xp6(2),t.Oqu(e.tooth_number),t.xp6(2),t.Oqu(t.xi3(10,11,null==e.record?null:e.record.realization_date,"short")),t.xp6(3),t.Oqu(t.xi3(13,14,null==e.record?null:e.record.price,"$ ")),t.xp6(3),t.Q6J("ngIf","PENDING"===(null==e.record?null:e.record.status)),t.xp6(3),t.Q6J("ngIf","PENDING"===(null==e.record?null:e.record.status)),t.xp6(1),t.Q6J("ngIf","PENDING"===(null==e.record?null:e.record.status))}}let $e=(()=>{class n{constructor(e){this.recordService=e}ngOnChanges(e){this.teeth=e.teeth.currentValue}ngOnInit(){}serviceDone(e){this.recordService.changeStatus(Number(e),Q.$.DONE)}serviceCancelled(e,i){g().fire({title:"\xbfEst\xe1s seguro de cancelar este servicio?",text:`'${i}'`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Si, cancelar"}).then(r=>{r.isConfirmed&&this.recordService.changeStatus(Number(e),Q.$.CANCEL)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(k.B))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-table-odontogram"]],inputs:{teeth:"teeth"},features:[t.TTD],decls:20,vars:1,consts:[[1,"table-responsive","mx-5","my-3"],[1,"table","align-middle","table-hover"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","badge rounded-pill text-primary bg-light-primary p-2 text-uppercase px-3",4,"ngIf"],[1,"d-flex","justify-content-center","order-actions"],["class","cursor ms-2 bg-light-success text-success",3,"click",4,"ngIf"],["class","cursor ms-2 bg-light-danger text-danger",3,"click",4,"ngIf"],[1,"badge","rounded-pill","text-primary","bg-light-primary","p-2","text-uppercase","px-3"],[1,"cursor","ms-2","bg-light-success","text-success",3,"click"],[1,"bx","bx-check-circle"],[1,"cursor","ms-2","bg-light-danger","text-danger",3,"click"],[1,"bx","bx-block"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Fecha de expedici\xf3n"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Servicio"),t.qZA(),t.TgZ(8,"th",2),t._uU(9,"# Pieza"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Fecha de realizaci\xf3n"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"$ Subtotal"),t.qZA(),t.TgZ(14,"th",2),t._uU(15,"Estado"),t.qZA(),t.TgZ(16,"th",2),t._uU(17,"Acciones"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Le,20,17,"tr",3),t.qZA()()()),2&e&&(t.xp6(19),t.Q6J("ngForOf",i.teeth))},directives:[u.sg,u.O5],pipes:[u.uU,u.H9],encapsulation:2}),n})();var He=l(539);function je(n,a){1&n&&(t.TgZ(0,"span",12),t._uU(1,"Pendiente"),t.qZA())}function Be(n,a){1&n&&(t.TgZ(0,"span",13),t._uU(1,"Cancelada"),t.qZA())}function Ve(n,a){1&n&&(t.TgZ(0,"span",14),t._uU(1,"Realizada"),t.qZA())}function Ge(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr",5),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).showDetails(s)}),t.TgZ(1,"td",3),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td",3),t.YNc(9,je,2,0,"span",6),t.YNc(10,Be,2,0,"span",7),t.YNc(11,Ve,2,0,"span",8),t.qZA(),t.TgZ(12,"td")(13,"div",9)(14,"a",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).showDetails(s)}),t._UZ(15,"i",11),t.qZA()()()()}if(2&n){const e=a.$implicit;t.xp6(2),t.hij("# ",e.id_appointment,""),t.xp6(2),t.Oqu(t.xi3(5,6,e.createdAt,"short")),t.xp6(3),t.Oqu(e.description),t.xp6(2),t.Q6J("ngIf","PENDING"===e.status),t.xp6(1),t.Q6J("ngIf","CANCELLED"===e.status),t.xp6(1),t.Q6J("ngIf","DONE"===e.status)}}function Ke(n,a){if(1&n&&(t.TgZ(0,"div",1)(1,"table",2)(2,"thead")(3,"tr")(4,"th",3),t._uU(5,"# Cita"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Fecha de Expedici\xf3n"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Observaciones"),t.qZA(),t.TgZ(10,"th",3),t._uU(11,"Estado"),t.qZA(),t.TgZ(12,"th",3),t._uU(13,"Acciones"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,Ge,16,9,"tr",4),t.qZA()()()),2&n){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",e.appointments)}}let Xe=(()=>{class n{constructor(e){this.appointmentService=e}ngOnInit(){console.log(this.appointments)}showDetails(e){this.appointmentService.changeAppointmentSelected(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.H))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-table-appointment"]],inputs:{appointments:"appointments"},decls:2,vars:1,consts:[["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table","align-middle","table-hover"],[1,"text-center"],["class","cursor","data-bs-toggle","modal","data-bs-target","#modalDetailAppointment",3,"click",4,"ngFor","ngForOf"],["data-bs-toggle","modal","data-bs-target","#modalDetailAppointment",1,"cursor",3,"click"],["class","badge rounded-pill text-primary bg-light-primary p-2 text-uppercase px-3",4,"ngIf"],["class","badge rounded-pill text-danger bg-light-danger p-2 text-uppercase px-3",4,"ngIf"],["class","badge rounded-pill text-success bg-light-success p-2 text-uppercase px-3",4,"ngIf"],[1,"d-flex","justify-content-center","order-actions"],["data-bs-toggle","modal","data-bs-target","#modalDetailAppointment",1,"ms-2","cursor","bg-light-primary","text-primary",3,"click"],[1,"bx","bx-id-card"],[1,"badge","rounded-pill","text-primary","bg-light-primary","p-2","text-uppercase","px-3"],[1,"badge","rounded-pill","text-danger","bg-light-danger","p-2","text-uppercase","px-3"],[1,"badge","rounded-pill","text-success","bg-light-success","p-2","text-uppercase","px-3"]],template:function(e,i){1&e&&(t.YNc(0,Ke,16,1,"div",0),t._UZ(1,"app-modal-appointment")),2&e&&t.Q6J("ngIf",i.appointments)},directives:[u.O5,u.sg,He.V],pipes:[u.uU],encapsulation:2}),n})();function ze(n,a){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.id_service),t.xp6(1),t.Oqu(e.name)}}let We=(()=>{class n{constructor(e,i){this.serviceOfferService=e,this.recordService=i,this.quantity=1}ngOnDestroy(){this.servicesActive.unsubscribe()}ngOnInit(){this.servicesActive=this.serviceOfferService.servicesActive.subscribe(e=>{this.services=e,this.services.length>0&&(this.serviceSelected=this.services[0],this.price=this.serviceSelected.price,this.subtotal=this.serviceSelected.price*this.quantity,this.quantity=1)})}changeService(e){var i;const r=Number(e.target.value);this.serviceSelected=this.services.find(s=>s.id_service===r),this.price=Number(null===(i=this.serviceSelected)||void 0===i?void 0:i.price),this.quantity=1,this.setSubtotal()}changeQuantity(e){const i=+Number(e).toFixed();this.quantity=i>0&&i<=10?i:1,this.setSubtotal()}setSubtotal(){this.subtotal=this.price*this.quantity}createService(){var e;const i={id_patient:Number(this.patientIdTemp),id_service:Number(null===(e=this.serviceSelected)||void 0===e?void 0:e.id_service),quantity:this.quantity,realization_date:new Date};this.recordService.createRecord(i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D._),t.Y36(k.B))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-modal-service"]],inputs:{patientIdTemp:"patientIdTemp"},decls:34,vars:10,consts:[["data-backdrop","static","data-keyboard","false","id","modalAddService","tabindex","-1","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","d-flex","text-info"],[1,"bx","bx-briefcase","me-1","font-30"],["data-bs-dismiss","modal","aria-label","Close",1,"bx","bx-x-circle","text-danger","font-30","cursor"],[1,"modal-body"],[1,"row"],[1,"col-9"],["for","selectService",1,"form-label"],["id","selectService",1,"form-select","radius-10",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-3"],["for","inputQuantity",1,"form-label"],["type","number","id","inputQuantity","min","1","max","10",1,"form-control","radius-10",3,"value","keyup","change"],["txtQuantity",""],[1,"d-flex","justify-content-end","align-items-end","flex-column","mt-4"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger","radius-10"],[1,"bx","bx-x"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success","radius-10",3,"click"],[1,"bx","bx-check"],[3,"value"]],template:function(e,i){if(1&e){const r=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._UZ(5,"i",5),t._uU(6," Agregar Servicio "),t.qZA(),t._UZ(7,"i",6),t.qZA(),t.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),t._uU(12,"Servicios disponibles"),t.qZA(),t.TgZ(13,"select",11),t.NdJ("change",function(d){return i.changeService(d)}),t.YNc(14,ze,2,2,"option",12),t.qZA()(),t.TgZ(15,"div",13)(16,"label",14),t._uU(17,"Cantidad"),t.qZA(),t.TgZ(18,"input",15,16),t.NdJ("keyup",function(){t.CHM(r);const d=t.MAs(19);return i.changeQuantity(d.value)})("change",function(){t.CHM(r);const d=t.MAs(19);return i.changeQuantity(d.value)}),t.qZA()()(),t.TgZ(20,"div",17)(21,"h5"),t._uU(22),t.ALo(23,"currency"),t.qZA(),t.TgZ(24,"h2"),t._uU(25),t.ALo(26,"currency"),t.qZA()()(),t.TgZ(27,"div",18)(28,"button",19),t._UZ(29,"i",20),t._uU(30," Cerrar "),t.qZA(),t.TgZ(31,"button",21),t.NdJ("click",function(){return i.createService()}),t._UZ(32,"i",22),t._uU(33," Agregar "),t.qZA()()()()()}2&e&&(t.xp6(14),t.Q6J("ngForOf",i.services),t.xp6(4),t.Q6J("value",i.quantity),t.xp6(4),t.hij(" Precio: ",t.xi3(23,4,i.price,"$ ")," "),t.xp6(3),t.hij(" Subtotal: ",t.xi3(26,7,i.subtotal,"$ ")," "))},directives:[u.sg,c.YN,c.Kr],pipes:[u.H9],encapsulation:2}),n})();function tn(n,a){1&n&&t._UZ(0,"app-text-alert",32),2&n&&t.Q6J("icon","bx-briefcase")("textColor","info")("text","No hay servicios por realizar")}function en(n,a){if(1&n&&t._UZ(0,"app-table-record",33),2&n){const e=t.oxw();t.Q6J("records",e.patientRecordHome)}}function nn(n,a){1&n&&t._UZ(0,"app-text-alert",32),2&n&&t.Q6J("icon","bx-briefcase")("textColor","info")("text","No hay servicios por realizar en Odontograma")}function on(n,a){if(1&n&&t._UZ(0,"app-table-odontogram",25),2&n){const e=t.oxw();t.Q6J("teeth",e.patientTeeth)}}function an(n,a){1&n&&t._UZ(0,"app-text-alert",32),2&n&&t.Q6J("icon","bx-id-card")("textColor","info")("text","No hay citas programadas")}function rn(n,a){if(1&n&&t._UZ(0,"app-table-appointment",34),2&n){const e=t.oxw();t.Q6J("appointments",e.patientAppointments)}}function sn(n,a){1&n&&t._UZ(0,"app-text-alert",32),2&n&&t.Q6J("icon","bx-id-card")("textColor","info")("text","No hay registros de este Paciente")}function cn(n,a){if(1&n&&t._UZ(0,"app-table-record",35),2&n){const e=t.oxw();t.Q6J("records",e.patientRecord)("isHome",!1)}}const ln=[{path:"",component:fe},{path:"new",component:kt},{path:":patientID",canActivate:[_],component:Kt},{path:"patient/:patientID/record",canActivate:[_],component:(()=>{class n{constructor(e,i,r,s,d){this.patientService=e,this.recordService=i,this.serviceOfferService=r,this.toothService=s,this.appointmentService=d,this.clickRecord=!1,this.clickOdontogram=!1,this.clickAppointment=!1,this.patientTemp=this.patientService.patientTemp}ngOnDestroy(){this.recordsHome.unsubscribe(),this.records.unsubscribe()}ngOnInit(){this.getAllRecords(1),this.recordsHome=this.recordService.changedRecordsHome.subscribe(e=>{e&&(this.getAllRecords(1),this.getAllTeeth())}),this.records=this.recordService.changedRecords.subscribe(e=>e?this.getAllRecords(2):"")}getServicesActive(){this.serviceOfferService.getServicesActive(!1)}getRecords(){!1===this.clickRecord&&this.getAllRecords(2),this.clickRecord=!0}getTeeth(){!1===this.clickOdontogram&&this.getAllTeeth(),this.clickOdontogram=!0}getAppointments(){!1===this.clickAppointment&&this.appointmentService.getAppointmentsByPatient(Number(this.patientTemp.id_patient)).subscribe(e=>{this.patientAppointments=e}),this.clickAppointment=!0}getAllTeeth(){this.toothService.getTeeth(this.patientTemp.id_patient).subscribe(e=>{this.patientTeeth=e})}getAllRecords(e){this.recordService.getRecords(this.patientTemp.id_patient,e).subscribe(i=>{1===e?this.patientRecordHome=i:this.patientRecord=i})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.e),t.Y36(k.B),t.Y36(D._),t.Y36(X),t.Y36(z.H))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-record"]],decls:53,vars:11,consts:[[3,"patient"],[1,"card","radius-10"],[1,"card-body"],["role","tablist",1,"nav","nav-tabs","nav-primary"],["role","presentation",1,"nav-item"],["data-bs-toggle","pill","href","#home","role","tab","aria-selected","true",1,"nav-link","active"],[1,"d-flex","align-items-center"],[1,"tab-icon"],[1,"bx","bx-home","font-18","me-1"],[1,"tab-title"],["data-bs-toggle","pill","href","#odontogram","role","tab","aria-selected","false",1,"nav-link",3,"click"],[1,"bx","bx-detail","font-18","me-1"],["data-bs-toggle","pill","href","#appointments","role","tab","aria-selected","false",1,"nav-link",3,"click"],[1,"bx","bx-id-card","font-18","me-1"],["data-bs-toggle","pill","href","#record","role","tab","aria-selected","false",1,"nav-link",3,"click"],[1,"bx","bx-time","font-18","me-1"],[1,"tab-content","py-3"],["id","home","role","tabpanel",1,"tab-pane","fade","m-4","active","show"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","w-100","mb-3"],[1,"mb-0"],["type","button","data-bs-toggle","modal","data-bs-target","#modalAddService","data-backdrop","static","data-keyboard","false",1,"btn","btn-outline-primary","px-3","radius-10",3,"click"],[1,"bx","bx-plus","mr-1"],[3,"icon","textColor","text",4,"ngIf"],[3,"records",4,"ngIf"],["id","odontogram","role","tabpanel",1,"tab-pane","fade"],[3,"teeth"],[3,"teeth",4,"ngIf"],["id","appointments","role","tabpanel",1,"tab-pane","fade","m-4"],[3,"appointments",4,"ngIf"],["id","record","role","tabpanel",1,"tab-pane","fade","m-4"],[3,"records","isHome",4,"ngIf"],[3,"patientIdTemp"],[3,"icon","textColor","text"],[3,"records"],[3,"appointments"],[3,"records","isHome"]],template:function(e,i){1&e&&(t._UZ(0,"app-card-patient-info",0),t.TgZ(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5)(6,"div",6)(7,"div",7),t._UZ(8,"i",8),t.qZA(),t.TgZ(9,"div",9),t._uU(10,"Inicio"),t.qZA()()()(),t.TgZ(11,"li",4)(12,"a",10),t.NdJ("click",function(){return i.getTeeth()}),t.TgZ(13,"div",6)(14,"div",7),t._UZ(15,"i",11),t.qZA(),t.TgZ(16,"div",9),t._uU(17,"Odontograma"),t.qZA()()()(),t.TgZ(18,"li",4)(19,"a",12),t.NdJ("click",function(){return i.getAppointments()}),t.TgZ(20,"div",6)(21,"div",7),t._UZ(22,"i",13),t.qZA(),t.TgZ(23,"div",9),t._uU(24,"Citas"),t.qZA()()()(),t.TgZ(25,"li",4)(26,"a",14),t.NdJ("click",function(){return i.getRecords()}),t.TgZ(27,"div",6)(28,"div",7),t._UZ(29,"i",15),t.qZA(),t.TgZ(30,"div",9),t._uU(31,"Historial"),t.qZA()()()()(),t.TgZ(32,"div",16)(33,"div",17)(34,"div",18)(35,"h2",19),t._uU(36," Servicios por realizar "),t.qZA(),t.TgZ(37,"button",20),t.NdJ("click",function(){return i.getServicesActive()}),t._UZ(38,"i",21),t._uU(39,"Agregar Servicio "),t.qZA()(),t.YNc(40,tn,1,3,"app-text-alert",22),t.YNc(41,en,1,1,"app-table-record",23),t.qZA(),t.TgZ(42,"div",24),t._UZ(43,"app-odontogram",25),t.YNc(44,nn,1,3,"app-text-alert",22),t.YNc(45,on,1,1,"app-table-odontogram",26),t.qZA(),t.TgZ(46,"div",27),t.YNc(47,an,1,3,"app-text-alert",22),t.YNc(48,rn,1,1,"app-table-appointment",28),t.qZA(),t.TgZ(49,"div",29),t.YNc(50,sn,1,3,"app-text-alert",22),t.YNc(51,cn,1,2,"app-table-record",30),t.qZA()()()(),t._UZ(52,"app-modal-service",31)),2&e&&(t.Q6J("patient",i.patientTemp),t.xp6(40),t.Q6J("ngIf",i.patientRecordHome&&0===i.patientRecordHome.length),t.xp6(1),t.Q6J("ngIf",i.patientRecordHome&&i.patientRecordHome.length>0),t.xp6(2),t.Q6J("teeth",i.patientTeeth),t.xp6(1),t.Q6J("ngIf",i.patientTeeth&&0===i.patientTeeth.length),t.xp6(1),t.Q6J("ngIf",i.patientTeeth&&i.patientTeeth.length>0),t.xp6(2),t.Q6J("ngIf",i.patientAppointments&&0===i.patientAppointments.length),t.xp6(1),t.Q6J("ngIf",i.patientAppointments&&i.patientAppointments.length>0),t.xp6(2),t.Q6J("ngIf",i.patientRecord&&0===i.patientRecord.length),t.xp6(1),t.Q6J("ngIf",i.patientRecord&&i.patientRecord.length>0),t.xp6(1),t.Q6J("patientIdTemp",i.patientTemp.id_patient))},directives:[Ze,u.O5,K._,we,Ye,$e,Xe,We],encapsulation:2}),n})()}];let pn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[o.Bz.forChild(ln)],o.Bz]}),n})()},3599:(I,b,l)=>{l.d(b,{_:()=>t});var o=l(1223),v=l(9808);let t=(()=>{class f{constructor(){this.icon="bx-detail",this.textColor="info",this.text="No hay registro"}ngOnInit(){}}return f.\u0275fac=function(h){return new(h||f)},f.\u0275cmp=o.Xpm({type:f,selectors:[["app-text-alert"]],inputs:{icon:"icon",textColor:"textColor",text:"text"},decls:3,vars:3,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","text-center",3,"ngClass"],[1,"bx",3,"ngClass"]],template:function(h,g){1&h&&(o.TgZ(0,"h1",0),o._UZ(1,"i",1),o._uU(2),o.qZA()),2&h&&(o.Q6J("ngClass","text-"+g.textColor),o.xp6(1),o.Q6J("ngClass",g.icon),o.xp6(1),o.hij(" ",g.text,"\n"))},directives:[v.mk],encapsulation:2}),f})()},2775:(I,b,l)=>{l.d(b,{n:()=>v});var o=l(1223);let v=(()=>{class t{constructor(){this.limit=new o.vpe}ngOnInit(){}changeLimit(_){const h=Number(_.target.value);this.limit.emit(Number(h))}}return t.\u0275fac=function(_){return new(_||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-dropdown-page-list"]],outputs:{limit:"limit"},decls:10,vars:0,consts:[[1,"d-flex","align-items-center","justify-content-between","gap-1"],[1,"form-select","radius-10",2,"width","auto",3,"change"],["value","5","selected",""],["valued","10"],["valued","15"]],template:function(_,h){1&_&&(o.TgZ(0,"div",0)(1,"span"),o._uU(2," Mostrar por p\xe1gina "),o.qZA(),o.TgZ(3,"select",1),o.NdJ("change",function(A){return h.changeLimit(A)}),o.TgZ(4,"option",2),o._uU(5,"5"),o.qZA(),o.TgZ(6,"option",3),o._uU(7,"10"),o.qZA(),o.TgZ(8,"option",4),o._uU(9,"15"),o.qZA()()())},encapsulation:2}),t})()},539:(I,b,l)=>{l.d(b,{V:()=>y});var o=l(1223),v=l(9944),t=l(9808),f=l(3599);function _(m,Z){1&m&&o._UZ(0,"app-text-alert",22),2&m&&o.Q6J("icon","bx-briefcase")("textColor","danger")("text","No hay servicios programados")}function h(m,Z){1&m&&(o.TgZ(0,"span",33),o._uU(1,"Pendiente"),o.qZA())}function g(m,Z){1&m&&(o.TgZ(0,"span",34),o._uU(1,"Pago Pendiente"),o.qZA())}function A(m,Z){1&m&&(o.TgZ(0,"span",35),o._uU(1,"Completado"),o.qZA())}function x(m,Z){1&m&&(o.TgZ(0,"span",34),o._uU(1,"Cancelado"),o.qZA())}function c(m,Z){if(1&m&&(o.TgZ(0,"tr",29)(1,"td"),o._uU(2),o.ALo(3,"date"),o.qZA(),o.TgZ(4,"td"),o._uU(5),o.qZA(),o.TgZ(6,"td",27),o.YNc(7,h,2,0,"span",30),o.YNc(8,g,2,0,"span",31),o.YNc(9,A,2,0,"span",32),o.YNc(10,x,2,0,"span",31),o.qZA()()),2&m){const p=Z.$implicit;o.xp6(2),o.hij(" ",o.xi3(3,6,p.createdAt,"short")," "),o.xp6(3),o.hij(" ",p.service_name," "),o.xp6(2),o.Q6J("ngIf","PENDING"===p.status),o.xp6(1),o.Q6J("ngIf","PENDING_PAYMENT"===p.status),o.xp6(1),o.Q6J("ngIf","COMPLETED"===p.status),o.xp6(1),o.Q6J("ngIf","CANCELLED"===p.status)}}function N(m,Z){if(1&m&&(o.TgZ(0,"div",25)(1,"table",26)(2,"thead")(3,"tr")(4,"th"),o._uU(5,"Fecha de expedici\xf3n"),o.qZA(),o.TgZ(6,"th"),o._uU(7,"Servicio"),o.qZA(),o.TgZ(8,"th",27),o._uU(9,"Estado"),o.qZA()()(),o.TgZ(10,"tbody"),o.YNc(11,c,11,9,"tr",28),o.qZA()()()),2&m){const p=o.oxw(3);o.xp6(11),o.Q6J("ngForOf",p.appointment.records)}}function F(m,Z){if(1&m&&(o.TgZ(0,"div",23)(1,"h3"),o._uU(2," Servicios programados "),o.qZA(),o.YNc(3,N,12,1,"div",24),o.qZA()),2&m){const p=o.oxw(2);o.xp6(3),o.Q6J("ngIf",p.appointment.records)}}function u(m,Z){if(1&m&&(o.TgZ(0,"div",3)(1,"div",4)(2,"h3",5),o._UZ(3,"i",6),o._uU(4),o.qZA(),o._UZ(5,"i",7),o.qZA(),o.TgZ(6,"div",8)(7,"h1",9),o._uU(8),o.qZA(),o.TgZ(9,"div",10)(10,"h5"),o._UZ(11,"i",11),o._uU(12),o.qZA(),o.TgZ(13,"h5"),o._UZ(14,"i",12),o._uU(15),o.qZA(),o.TgZ(16,"h5"),o._UZ(17,"i",13),o._uU(18),o.qZA(),o.TgZ(19,"h5"),o._UZ(20,"i",14),o._uU(21),o.qZA(),o.TgZ(22,"h5"),o._UZ(23,"i",15),o._uU(24),o.qZA()(),o._UZ(25,"hr"),o.YNc(26,_,1,3,"app-text-alert",16),o.YNc(27,F,4,1,"div",17),o._UZ(28,"hr"),o.TgZ(29,"h4",18),o._uU(30),o.qZA()(),o.TgZ(31,"div",19)(32,"button",20),o._UZ(33,"i",21),o._uU(34," Cerrar "),o.qZA()()()),2&m){const p=o.oxw();o.xp6(4),o.hij(" Cita: # ",p.appointment.id_appointment," "),o.xp6(3),o.Q6J("ngClass",p.getColorStatus),o.xp6(1),o.hij(" ",p.getStatus," "),o.xp6(4),o.hij("Paciente: ",null==p.appointment.patient?null:p.appointment.patient.id_patient,""),o.xp6(3),o.AsE("",null==p.appointment.patient?null:p.appointment.patient.name," ",null==p.appointment.patient?null:p.appointment.patient.last_name,""),o.xp6(3),o.Oqu(p.getAddress),o.xp6(3),o.Oqu(null==p.appointment.patient?null:p.appointment.patient.phone_number),o.xp6(3),o.Oqu(null==p.appointment.patient?null:p.appointment.patient.email),o.xp6(2),o.Q6J("ngIf",p.appointment.records&&0===p.appointment.records.length),o.xp6(1),o.Q6J("ngIf",p.appointment.records&&p.appointment.records.length>0),o.xp6(3),o.hij("Observaciones: ",p.appointment.description," ")}}let y=(()=>{class m{constructor(p){this.appointmentService=p}ngOnDestroy(){this.changeAppointment.unsubscribe()}ngOnInit(){this.changeAppointment=this.appointmentService.appointmentSelected.subscribe(p=>{this.appointment=p})}get getStatus(){const p=this.appointment.status;return"Cita "+("CANCELLED"===p?"cancelada":"PENDING"===p?"pendiente":"realizada")}get getColorStatus(){const p=this.appointment.status;return"text-"+("CANCELLED"===p?"danger":"PENDING"===p?"primary":"success")}get getAddress(){const{street:p,cp:E,city:M,country:R}=this.appointment.patient;return`${p}, CP. ${E} ${M}, ${R}`}}return m.\u0275fac=function(p){return new(p||m)(o.Y36(v.H))},m.\u0275cmp=o.Xpm({type:m,selectors:[["app-modal-appointment"]],decls:3,vars:1,consts:[["id","modalDetailAppointment","tabindex","-1","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],["class","modal-content radius-10",4,"ngIf"],[1,"modal-content","radius-10"],[1,"modal-header"],[1,"modal-title","d-flex","text-info"],[1,"bx","bx-detail","me-1","font-30"],["data-bs-dismiss","modal","aria-label","Close",1,"bx","bx-x-circle","text-danger","font-30","cursor"],[1,"modal-body"],[1,"text-center",3,"ngClass"],[1,"d-flex","flex-column","gap-2","flex-wrap","my-3"],[1,"bx","bx-hash","mx-2"],[1,"bx","bxs-user","mx-2"],[1,"bx","bxs-home","mx-2"],[1,"bx","bxs-phone","mx-2"],[1,"bx","bxs-envelope","mx-2"],[3,"icon","textColor","text",4,"ngIf"],["class","m-2",4,"ngIf"],[1,"text-muted","mt-3","mx-2"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger","radius-10"],[1,"bx","bx-x"],[3,"icon","textColor","text"],[1,"m-2"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table","align-middle","table-hover"],[1,"text-center"],["style","height: 55px;",4,"ngFor","ngForOf"],[2,"height","55px"],["class","badge rounded-pill text-primary bg-light-primary p-2 text-uppercase px-3",4,"ngIf"],["class","badge rounded-pill text-danger bg-light-danger p-2 text-uppercase px-3",4,"ngIf"],["class","badge rounded-pill text-success bg-light-success p-2 text-uppercase px-3",4,"ngIf"],[1,"badge","rounded-pill","text-primary","bg-light-primary","p-2","text-uppercase","px-3"],[1,"badge","rounded-pill","text-danger","bg-light-danger","p-2","text-uppercase","px-3"],[1,"badge","rounded-pill","text-success","bg-light-success","p-2","text-uppercase","px-3"]],template:function(p,E){1&p&&(o.TgZ(0,"div",0)(1,"div",1),o.YNc(2,u,35,12,"div",2),o.qZA()()),2&p&&(o.xp6(2),o.Q6J("ngIf",E.appointment))},directives:[t.O5,t.mk,f._,t.sg],pipes:[t.uU],encapsulation:2}),m})()},8115:(I,b,l)=>{l.d(b,{Q:()=>v});var o=l(1223);let v=(()=>{class t{constructor(){this.limit=0,this.total=0,this.changedOffset=new o.vpe,this.offset=0,this.pageActive=1,this.totalPages=0}ngOnChanges(_){this.limit=_.limit&&_.limit.currentValue||5,this.pageActive=1,this.getPages()}ngOnInit(){this.getPages()}getPages(){this.totalPages=this.getTotalPages}get getTotalPages(){return Math.ceil(this.total/this.limit)}changePage(_){this.pageActive+=_>0?1:-1,this.offset+=_,this.offset<0?(this.offset=0,this.pageActive=1):this.offset>=this.total&&(this.offset-=_,this.pageActive=this.getTotalPages),this.changedOffset.emit(this.offset)}}return t.\u0275fac=function(_){return new(_||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-pagination"]],inputs:{limit:"limit",total:"total"},outputs:{changedOffset:"changedOffset"},features:[o.TTD],decls:8,vars:4,consts:[[1,"d-flex","justify-content-between","align-items-center","gap-2"],["role","group","aria-label","Basic example",1,"btn-group","m-1"],["type","button",1,"btn","btn-outline-primary","radius-10",3,"disabled","click"]],template:function(_,h){1&_&&(o.TgZ(0,"div",0)(1,"span"),o._uU(2),o.qZA(),o.TgZ(3,"div",1)(4,"button",2),o.NdJ("click",function(){return h.changePage(-h.limit)}),o._uU(5," Anterior "),o.qZA(),o.TgZ(6,"button",2),o.NdJ("click",function(){return h.changePage(h.limit)}),o._uU(7," Siguiente "),o.qZA()()()),2&_&&(o.xp6(2),o.AsE(" Pagina ",h.pageActive," de ",h.totalPages," "),o.xp6(2),o.Q6J("disabled",1===h.pageActive),o.xp6(2),o.Q6J("disabled",h.pageActive===h.totalPages))},encapsulation:2}),t})()}}]);